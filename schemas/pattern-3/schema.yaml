type: object
required:
- notes
- classes
- classification
- extraction
properties:
  notes:
    order: 0
    type: string
    description: Notes
  ocr:
    order: 1
    type: object
    sectionLabel: OCR Configuration
    required:
    - features
    properties:
      image:
        type: object
        sectionLabel: Image Processing Settings
        description: Configure image resolution and processing options for OCR
        order: 0
        properties:
          dpi:
            type: number
            description: 'DPI (dots per inch) for extracting images from PDF pages. Higher values produce better quality but
              larger images. Default: 150'
            minimum: 72
            maximum: 300
            default: 150
            order: 0
          target_width:
            type: number
            description: 'Target image width in pixels. Images larger than this will be resized. Default: 951'
            minimum: 100
            maximum: 3500
            order: 1
          target_height:
            type: number
            description: 'Target image height in pixels. Images larger than this will be resized. Default: 1268'
            minimum: 100
            maximum: 3500
            order: 2
          preprocessing:
            type: boolean
            description: 'Apply adaptive binarization preprocessing to improve OCR accuracy on documents with uneven lighting
              or low contrast. Warning: May slightly increase processing time.'
            default: false
            order: 3
      backend:
        type: string
        description: 'OCR backend to use: ''textract'' for AWS Textract, ''bedrock'' for LLM-based OCR, ''none'' for image-only
          processing without OCR'
        enum:
        - textract
        - bedrock
        - none
        default: textract
        order: 3
      model_id:
        type: string
        description: Bedrock model ID (only used if backend is 'bedrock')
        enum:
        - us.amazon.nova-lite-v1:0
        - us.amazon.nova-pro-v1:0
        - us.amazon.nova-premier-v1:0
        - us.anthropic.claude-3-haiku-20240307-v1:0
        - us.anthropic.claude-3-5-sonnet-20241022-v2:0
        - us.anthropic.claude-3-7-sonnet-20250219-v1:0
        - us.anthropic.claude-sonnet-4-20250514-v1:0
        - us.anthropic.claude-opus-4-20250514-v1:0
        order: 2
        dependsOn:
          field: backend
          value: bedrock
      system_prompt:
        type: string
        description: System prompt for Bedrock OCR (only used if backend is 'bedrock')
        default: You are an expert OCR system. Extract all text from the provided image accurately, preserving layout where
          possible.
        order: 3
        dependsOn:
          field: backend
          value: bedrock
      task_prompt:
        type: string
        description: Task prompt for Bedrock OCR (only used if backend is 'bedrock')
        default: Extract all text from this document image. Preserve the layout, including paragraphs, tables, and formatting.
        order: 4
        dependsOn:
          field: backend
          value: bedrock
      features:
        type: array
        listLabel: Textract Features
        itemLabel: Feature
        description: Textract features (only used if backend is 'textract')
        order: 5
        dependsOn:
          field: backend
          values:
          - textract
        items:
          type: object
          required:
          - name
          properties:
            name:
              type: string
              description: Feature - select one of the supported OCR feature types
              enum:
              - TABLES
              - FORMS
              - SIGNATURES
              - LAYOUT
  classes:
    order: 2
    type: array
    sectionLabel: Class definitions
    listLabel: Classes
    itemLabel: Class
    columns: 2
    items:
      type: object
      required:
      - name
      - description
      - attributes
      properties:
        name:
          type: string
          description: Class name
        description:
          type: string
          description: Class description. Instruct LLM how to identify the class from the context provided in the classification
            prompt.
        examples:
          type: array
          description: Class few-shot examples
          listLabel: Few-shot examples
          itemLabel: Few-shot example
          items:
            type: object
            required:
            - name
            - classPrompt
            - attributesPrompt
            - imagePath
            properties:
              name:
                type: string
                description: Example name
                order: 0
              classPrompt:
                type: string
                description: Classification prompt as few-shot classification example for this class
                order: 2
              attributesPrompt:
                type: string
                description: Extraction prompt as few-shot attribute value extraction example for this class.
                order: 3
              imagePath:
                type: string
                description: Image(s) Path in the Configuration Bucket. Supports single files, or S3 prefixes for folders
                  with multiple images. Optional but recommended for better visual understanding.
                order: 4
        attributes:
          type: array
          listLabel: Attributes
          itemLabel: Attribute
          items:
            type: object
            required:
            - name
            - description
            - attributeType
            properties:
              name:
                type: string
                description: Attribute name
                order: 0
              description:
                type: string
                description: Attribute description. Instruct the LLM how to identify the attribute from the context provided
                  in the extraction prompt. Include synonyms and positional infomation where it might help the LLM to resolve
                  ambiquities.
                order: 1
              attributeType:
                type: string
                description: Type of attribute
                enum:
                - simple
                - group
                - list
                order: 2
              evaluation_method:
                type: string
                description: Evaluation Method
                enum:
                - ''
                - LLM
                - SEMANTIC
                - FUZZY
                - NUMERIC_EXACT
                - EXACT
                order: 3
                dependsOn:
                  field: attributeType
                  value: simple
              evaluation_threshold:
                type: number
                description: Evaluation Threshold - used for SEMANTIC, and FUZZY methods
                minimum: 0
                maximum: 1
                order: 5
                dependsOn:
                  field: evaluation_method
                  values:
                  - SEMANTIC
                  - FUZZY
              confidence_threshold:
                type: number
                description: Confidence threshold for this specific attribute (0.0 to 1.0). If not set, the default confidence
                  threshold from assessment section will be used.
                minimum: 0
                maximum: 1
                order: 6
                dependsOn:
                  field: attributeType
                  value: simple
              groupAttributes:
                type: array
                listLabel: Group Attributes
                itemLabel: Attribute
                order: 7
                dependsOn:
                  field: attributeType
                  value: group
                items:
                  type: object
                  required:
                  - name
                  - description
                  properties:
                    name:
                      type: string
                      description: Attribute name
                      order: 0
                    description:
                      type: string
                      description: Attribute description. Instruct the LLM how to identify the attribute from the context
                        provided in the extraction prompt. Include synonyms and positional infomation where it might help
                        the LLM to resolve ambiquities.
                      order: 1
                    evaluation_method:
                      type: string
                      description: Evaluation Method
                      enum:
                      - ''
                      - LLM
                      - SEMANTIC
                      - FUZZY
                      - NUMERIC_EXACT
                      - EXACT
                      order: 2
                    evaluation_threshold:
                      type: number
                      description: Evaluation Threshold - used for SEMANTIC, and FUZZY methods
                      minimum: 0
                      maximum: 1
                      order: 4
                      dependsOn:
                        field: evaluation_method
                        values:
                        - SEMANTIC
                        - FUZZY
                    confidence_threshold:
                      type: number
                      description: Confidence threshold for this specific attribute (0.0 to 1.0). If not set, the default
                        confidence threshold from assessment section will be used.
                      minimum: 0
                      maximum: 1
                      order: 5
                  columns: 2
              listItemTemplate:
                type: object
                sectionLabel: List Item Template
                order: 8
                dependsOn:
                  field: attributeType
                  value: list
                required:
                - itemAttributes
                properties:
                  itemDescription:
                    type: string
                    description: 'Description of each list item. Instruct the LLM how to identify the list item (e.g. a transaction
                      in a bank statement). '
                    order: 0
                  itemAttributes:
                    type: array
                    listLabel: Item Attributes
                    itemLabel: Attribute
                    order: 1
                    items:
                      type: object
                      required:
                      - name
                      - description
                      properties:
                        name:
                          type: string
                          description: Attribute name
                          order: 0
                        description:
                          type: string
                          description: Attribute description. Instruct the LLM how to identify the attribute from the context
                            provided in the extraction prompt. Include synonyms and positional infomation where it might help
                            the LLM to resolve ambiquities.
                          order: 1
                        evaluation_method:
                          type: string
                          description: Evaluation Method
                          enum:
                          - ''
                          - LLM
                          - SEMANTIC
                          - FUZZY
                          - NUMERIC_EXACT
                          - EXACT
                          order: 2
                        evaluation_threshold:
                          type: number
                          description: Evaluation Threshold - used for SEMANTIC, and FUZZY methods
                          minimum: 0
                          maximum: 1
                          order: 4
                          dependsOn:
                            field: evaluation_method
                            values:
                            - SEMANTIC
                            - FUZZY
                        confidence_threshold:
                          type: number
                          description: Confidence threshold for this specific attribute (0.0 to 1.0). If not set, the default
                            confidence threshold from assessment section will be used.
                          minimum: 0
                          maximum: 1
                          order: 5
                      columns: 2
            columns: 2
  extraction:
    order: 4
    type: object
    format: section
    sectionLabel: Extraction Inference
    required:
    - model
    - temperature
    - top_k
    - top_p
    - max_tokens
    - system_prompt
    - task_prompt
    properties:
      image:
        type: object
        sectionLabel: Image Processing Settings
        description: Configure image resolution and processing options for for image attachments in extraction
        order: 0
        properties:
          target_width:
            type: number
            description: 'Target image width in pixels. Images larger than this will be resized. Default: 951'
            minimum: 100
            maximum: 3500
            order: 0
          target_height:
            type: number
            description: 'Target image height in pixels. Images larger than this will be resized. Default: 1268'
            minimum: 100
            maximum: 3500
            order: 1
      model:
        type: string
        description: Model identifier
        enum:
        - us.amazon.nova-lite-v1:0
        - us.amazon.nova-pro-v1:0
        - us.amazon.nova-premier-v1:0
        - us.anthropic.claude-3-haiku-20240307-v1:0
        - us.anthropic.claude-3-5-sonnet-20241022-v2:0
        - us.anthropic.claude-3-7-sonnet-20250219-v1:0
        - us.anthropic.claude-sonnet-4-20250514-v1:0
        - us.anthropic.claude-opus-4-20250514-v1:0
        order: 1
      temperature:
        type: number
        minimum: 0
        maximum: 1
        description: Sampling temperature
        order: 2
      top_k:
        type: integer
        minimum: 1
        description: Sampling Top K
        order: 3
      top_p:
        type: number
        description: Sampling Top P
        order: 4
      max_tokens:
        type: number
        description: Max tokens
        order: 5
      system_prompt:
        type: string
        description: System prompt
        order: 6
      task_prompt:
        type: string
        description: Task prompt - supports placeholders {DOCUMENT_CLASS} (replaced with the detected class label), {ATTRIBUTE_NAMES_AND_DESCRIPTIONS}
          (replaced with the attribute names and descriptions for the detected class), {FEW_SHOT_EXAMPLES} (replaced by classPrompt
          and image data from examples in class definitions), {DOCUMENT_TEXT} (replaced by the OCR output), and {DOCUMENT_IMAGE}
          (replaced by the page image attachments for each page). Optionally use <<CACHEPOINT>> to separate static and dynamic
          elements of prompt for Bedrock prompt caching.
        order: 7
  assessment:
    order: 5
    type: object
    sectionLabel: Assessment Inference
    properties:
      image:
        type: object
        sectionLabel: Image Processing Settings
        description: Configure image resolution and processing options for for image attachments in assessment
        order: 0
        properties:
          target_width:
            type: number
            description: 'Target image width in pixels. Images larger than this will be resized. Default: 951'
            minimum: 100
            maximum: 3500
            order: 0
          target_height:
            type: number
            description: 'Target image height in pixels. Images larger than this will be resized. Default: 1268'
            minimum: 100
            maximum: 3500
            order: 1
      granular:
        type: object
        sectionLabel: Granular Assessment Configuration
        description: Configure granular assessment for improved accuracy and scalability with large documents
        order: 1
        properties:
          enabled:
            type: boolean
            description: Enable granular assessment approach. When enabled, assessments are broken down into smaller, focused
              tasks for better accuracy and performance.
            default: true
            order: 0
          max_workers:
            type: integer
            description: Maximum number of parallel workers for concurrent assessment tasks. Higher values increase throughput
              but consume more resources.
            minimum: 1
            maximum: 20
            default: 4
            order: 1
            dependsOn:
              field: enabled
              value: true
          simple_batch_size:
            type: integer
            description: Number of simple attributes to group together in each assessment task. Smaller batches provide more
              focused assessments.
            minimum: 1
            maximum: 10
            default: 3
            order: 2
            dependsOn:
              field: enabled
              value: true
          list_batch_size:
            type: integer
            description: Number of list items to process in each assessment task. Usually 1 for best accuracy, can be increased
              for speed.
            minimum: 1
            maximum: 5
            default: 1
            order: 3
            dependsOn:
              field: enabled
              value: true
      default_confidence_threshold:
        type: number
        description: Default confidence threshold for all attributes (0.0 to 1.0). If an attribute doesn't have its own threshold,
          this default will be used for confidence threshold alerts.
        minimum: 0
        maximum: 1
        order: 2
      model:
        type: string
        description: Bedrock model ID
        enum:
        - us.amazon.nova-lite-v1:0
        - us.amazon.nova-pro-v1:0
        - us.amazon.nova-premier-v1:0
        - us.anthropic.claude-3-haiku-20240307-v1:0
        - us.anthropic.claude-3-5-sonnet-20241022-v2:0
        - us.anthropic.claude-3-7-sonnet-20250219-v1:0
        - us.anthropic.claude-sonnet-4-20250514-v1:0
        - us.anthropic.claude-opus-4-20250514-v1:0
        order: 3
      temperature:
        type: number
        description: Sampling temperature
        order: 4
      top_k:
        type: number
        description: Sampling Top K
        order: 5
      top_p:
        type: number
        description: Sampling Top P
        order: 6
      max_tokens:
        type: number
        description: Max tokens
        order: 7
      system_prompt:
        type: string
        format: textarea
        description: System prompt
        order: 8
      task_prompt:
        type: string
        format: textarea
        description: Task prompt - supports placeholders {DOCUMENT_TEXT} (markdown text), {OCR_TEXT_CONFIDENCE} (OCR text
          blocks with confidence), {DOCUMENT_CLASS}, {ATTRIBUTE_NAMES_AND_DESCRIPTIONS}, {EXTRACTION_RESULTS}, {GRANULAR_CONTEXT}
          and {DOCUMENT_IMAGE}. Use <<CACHEPOINT>> to separate static and dynamic elements of prompt for Bedrock prompt caching.
        order: 9
  summarization:
    order: 6
    type: object
    sectionLabel: Summarization Inference
    properties:
      model:
        type: string
        description: Bedrock model ID
        enum:
        - us.amazon.nova-lite-v1:0
        - us.amazon.nova-pro-v1:0
        - us.amazon.nova-premier-v1:0
        - us.anthropic.claude-3-haiku-20240307-v1:0
        - us.anthropic.claude-3-5-sonnet-20241022-v2:0
        - us.anthropic.claude-3-7-sonnet-20250219-v1:0
        - us.anthropic.claude-sonnet-4-20250514-v1:0
        - us.anthropic.claude-opus-4-20250514-v1:0
        order: 1
      temperature:
        type: number
        description: Sampling temperature
        order: 2
      top_k:
        type: number
        description: Sampling Top K
        order: 3
      top_p:
        type: number
        description: Sampling Top P
        order: 4
      max_tokens:
        type: number
        description: Max tokens
        order: 5
      system_prompt:
        type: string
        format: textarea
        description: System prompt
        order: 6
      task_prompt:
        type: string
        format: textarea
        description: Task prompt - supports parameter {DOCUMENT_TEXT}. Optionally use <<CACHEPOINT>> to separate static and
          dynamic elements of prompt for Bedrock prompt caching.
        order: 7
  evaluation:
    order: 7
    type: object
    sectionLabel: Evaluation Inference
    properties:
      llm_method:
        type: object
        properties:
          model:
            type: string
            description: Bedrock model ID
            enum:
            - us.amazon.nova-lite-v1:0
            - us.amazon.nova-pro-v1:0
            - us.amazon.nova-premier-v1:0
            - us.anthropic.claude-3-haiku-20240307-v1:0
            - us.anthropic.claude-3-5-sonnet-20241022-v2:0
            - us.anthropic.claude-3-7-sonnet-20250219-v1:0
            - us.anthropic.claude-sonnet-4-20250514-v1:0
            - us.anthropic.claude-opus-4-20250514-v1:0
            order: 1
          temperature:
            type: number
            description: Sampling temperature
            default: 0
            order: 2
          top_k:
            type: number
            description: Sampling Top K
            default: 250
            order: 3
          top_p:
            type: number
            description: Sampling Top P
            order: 4
          max_tokens:
            type: number
            description: Max tokens
            order: 5
          system_prompt:
            type: string
            format: textarea
            description: System prompt for LLM evaluation
            order: 6
          task_prompt:
            type: string
            format: textarea
            description: Task prompt for LLM evaluation - supports placeholders {DOCUMENT_CLASS}, {ATTRIBUTE_NAME}, {ATTRIBUTE_DESCRIPTION},
              {EXPECTED_VALUE} and {ACTUAL_VALUE}
            order: 7
  pricing:
    order: 8
    type: array
    sectionLabel: Pricing (Estimates only - check https://aws.amazon.com/bedrock/pricing/ & https://aws.amazon.com/textract/pricing/)
    listLabel: Services
    itemLabel: Service/API
    columns: 2
    items:
      type: object
      required:
      - name
      - units
      properties:
        name:
          type: string
          description: Service/API
        units:
          type: array
          listLabel: Metered unit pricing
          itemLabel: Metered Unit price
          items:
            type: object
            required:
            - name
            - price
            properties:
              name:
                type: string
                description: Metered unit name
              price:
                type: number
                description: Estimated cost/unit
